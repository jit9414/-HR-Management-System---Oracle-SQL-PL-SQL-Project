# -HR-Management-System---Oracle-SQL-PL-SQL-Project


-- 1. EMPLOYEE Table
CREATE TABLE EMPLOYEE (
    EMP_ID NUMBER PRIMARY KEY,
    FIRST_NAME VARCHAR2(50),
    LAST_NAME VARCHAR2(50),
    EMAIL VARCHAR2(100) UNIQUE,
    PHONE_NUMBER VARCHAR2(20),
    HIRE_DATE DATE,
    JOB_TITLE VARCHAR2(50),
    DEPARTMENT VARCHAR2(50)
);

-- 2. SALARY Table
CREATE TABLE SALARY (
    SALARY_ID NUMBER PRIMARY KEY,
    EMP_ID NUMBER,
    BASIC_SALARY NUMBER(10,2),
    BONUS NUMBER(10,2),
    DEDUCTIONS NUMBER(10,2),
    NET_SALARY AS (BASIC_SALARY + BONUS - DEDUCTIONS),
    PAY_DATE DATE,
    FOREIGN KEY (EMP_ID) REFERENCES EMPLOYEE(EMP_ID)
);

-- 3. ATTENDANCE Table
CREATE TABLE ATTENDANCE (
    ATTENDANCE_ID NUMBER PRIMARY KEY,
    EMP_ID NUMBER,
    ATTENDANCE_DATE DATE,
    STATUS VARCHAR2(10) CHECK (STATUS IN ('Present', 'Absent', 'Leave')),
    FOREIGN KEY (EMP_ID) REFERENCES EMPLOYEE(EMP_ID)
);

-- 4. LEAVE Table
CREATE TABLE LEAVE (
    LEAVE_ID NUMBER PRIMARY KEY,
    EMP_ID NUMBER,
    START_DATE DATE,
    END_DATE DATE,
    LEAVE_TYPE VARCHAR2(20) CHECK (LEAVE_TYPE IN ('Sick', 'Casual', 'Annual')),
    STATUS VARCHAR2(20) CHECK (STATUS IN ('Pending', 'Approved', 'Rejected')),
    FOREIGN KEY (EMP_ID) REFERENCES EMPLOYEE(EMP_ID)
);

-- Insert Sample Data
INSERT INTO EMPLOYEE VALUES (1, 'Amit', 'Sharma', 'amit@example.com', '9876543210', SYSDATE, 'Manager', 'HR');
INSERT INTO SALARY VALUES (1, 1, 50000, 5000, 2000, SYSDATE);
INSERT INTO ATTENDANCE VALUES (1, 1, SYSDATE, 'Present');
INSERT INTO LEAVE VALUES (1, 1, TO_DATE('2024-07-15', 'YYYY-MM-DD'), TO_DATE('2024-07-20', 'YYYY-MM-DD'), 'Annual', 'Pending');

-- Stored Procedure: Calculate Total Salary
CREATE OR REPLACE PROCEDURE CALCULATE_SALARY (p_emp_id NUMBER) AS
    v_net_salary NUMBER;
BEGIN
    SELECT BASIC_SALARY + BONUS - DEDUCTIONS INTO v_net_salary 
    FROM SALARY WHERE EMP_ID = p_emp_id;
    DBMS_OUTPUT.PUT_LINE('Total Salary for EMP_ID ' || p_emp_id || ' is: ' || v_net_salary);
END;
/

-- Trigger: Prevent Salary Deduction More Than Basic Salary
CREATE OR REPLACE TRIGGER CHECK_SALARY_DEDUCTION
BEFORE INSERT OR UPDATE ON SALARY
FOR EACH ROW
BEGIN
    IF :NEW.DEDUCTIONS > :NEW.BASIC_SALARY THEN
        RAISE_APPLICATION_ERROR(-20001, 'Deductions cannot be greater than Basic Salary!');
    END IF;
END;
/

-- View: Employee Salary View
CREATE VIEW EMPLOYEE_SALARY AS
SELECT E.EMP_ID, E.FIRST_NAME, E.LAST_NAME, S.BASIC_SALARY, S.BONUS, S.DEDUCTIONS, S.NET_SALARY
FROM EMPLOYEE E JOIN SALARY S ON E.EMP_ID = S.EMP_ID;
